<!DOCTYPE html>
<html>
    <head>
        <title>GraphResults</title>
        <script>
            function validate() {
                var file1name = document.forms["fileForm"]["file1"].value;
                var file2name = document.forms["fileForm"]["file2"].value;
                var file3name = document.forms["fileForm"]["file3"].value;
                var file4name = document.forms["fileForm"]["file4"].value;
                var file1desc = document.forms["fileForm"]["file1desc"].value;
                var file2desc = document.forms["fileForm"]["file2desc"].value;
                var file3desc = document.forms["fileForm"]["file3desc"].value;
                var file4desc = document.forms["fileForm"]["file4desc"].value;
                
                // Make sure at least one file is chosen
                if ((!file1name)&&(!file2name)&&(!file3name)&&(!file4name)) {
                    alert("Please upload a dataset text file.");
                    return false;
                }
                
                // Make sure each added file has a label
                if ((file1name)&&(!file1desc)) {
                    alert("Please enter a label for dataset 1.");
                    return false;
                }
                if ((file2name)&&(!file2desc)) {
                    alert("Please enter a label for dataset 2.");
                    return false;
                }
                if ((file3name)&&(!file3desc)) {
                    alert("Please enter a label for dataset 3.");
                    return false;
                }
                if ((file4name)&&(!file4desc)) {
                    alert("Please enter a label for dataset 4.");
                    return false;
                }
                
                // Check for duplicate labels
                var arr = [];
                if (file1desc) {
                    arr.push(file1desc);
                }
                if (file2desc) {
                    arr.push(file2desc);
                }
                if (file3desc) {
                    arr.push(file3desc);
                }
                if (file4desc) {
                    arr.push(file4desc);
                }

                var sorted_arr = arr.sort();

                for (var i = 0; i < arr.length - 1; i++) {
                    if (sorted_arr[i + 1] == sorted_arr[i]) {
                        alert("Duplicate labels are not allowed.");
                        return false;
                    }
                }
                return true;
            }
        </script>
    </head>
    <body style="line-height: 30px">
    
        
        <center> 
            <h1>GraphResults</h1>
            Choose up to four data sets, and set labels for each. The data sets must be .txt files generated by one of the four scripts:
        </center>
        
        <ul style="display:table;margin:0 auto">
            <li>get_commits_per_month.py</li>
            <li>get_contributors_per_month.py</li>
            <li>get_reddit_posts_per_month.py</li>
            <li>get_stack_overflow_posts_per_month.py</li>
        </ul>
        
        <br>
        
        <center>
            <form name="fileForm" action="graph" method="post" onsubmit="return validate()" enctype="multipart/form-data">
                <table>
                    <tr>
                        <td><b>Dataset File</b></td>
                        <td><b>Label</b></td>
                    </tr>
                    <tr>
                        <td><input type="file" name="file1" accept=".txt"></td>
                        <td><input type="text" name="file1desc"></td>
                    </tr>
                        <td><input type="file" name="file2" accept=".txt"></td>
                        <td><input type="text" name="file2desc"></td>
                    </tr>
                        <td><input type="file" name="file3" accept=".txt"></td>
                        <td><input type="text" name="file3desc"></td>
                    </tr>
                        <td><input type="file" name="file4" accept=".txt"></td>
                        <td><input type="text" name="file4desc"></td>
                    </tr>
                </table>
                <br>
                <input type="submit">
                
            </form>
        </center>
    </body>
</html>
